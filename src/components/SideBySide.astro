---
import introVideo from "@assets/videos/intro.mp4";
import introCaptions from "@assets/videos/captions/intro-captions.vtt";
import logoIcon from "@assets/images/logo_icon.png";
import { Image } from "astro:assets";
import thumbnail from "@assets/images/hero/thumbnail.png";
---

<!-- ============================================ --><!--              Side By Side Reverse            --><!-- ============================================ -->
<section id="sbsr-1457" class="relative">
    <div class="cs-container">
        <!-- Left Image Section -->
        <div class="cs-image-group">
            <div
                class="cs-picture self-center relative"
                id="sbs-video-container"
            >
                <!-- Thumbnail image that shows initially -->
                <Image
                    src={thumbnail}
                    alt="Video thumbnail"
                    class="thumbnail-img responsive-video"
                    width={650}
                    height={650}
                />

                <!-- Add play button overlay -->
                <button class="play-button" aria-label="Play video">
                    <svg
                        width="48"
                        height="48"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <circle
                            cx="12"
                            cy="12"
                            r="11"
                            stroke="white"
                            stroke-width="2"></circle>
                        <path d="M9.5 7.5v9l7.5-4.5-7.5-4.5z" fill="white"
                        ></path>
                    </svg>
                </button>
                <video
                    id="sbs-video"
                    src={introVideo}
                    preload="none"
                    class="responsive-video hidden"
                    controlslist="nodownload noremoteplayback picture-in-picture nofullscreen"
                    playsinline
                >
                    <track
                        kind="captions"
                        src={introCaptions}
                        srclang="en"
                        label="English"
                        default
                        class="mb-4"
                    />
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
        <!-- Right Content Section-->
        <div class="cs-content">
            <div class="flex items-center gap-4 mb-4">
                <Image src={logoIcon} alt="logo" width={32} height={32} />
                <span class="cs-topper mb-0 text-header-secondary"
                    >Welcome Message</span
                >
            </div>

            <h2 class="cs-title">Empower your ability for change</h2>
            <p class="cs-text">
                I created this platform to help people like you explore the
                deeper levels of yourself through breathwork. Breathwork is a
                simple yet transformative practice that allows you to manage
                stress, quiet your mind, and let go of limiting beliefs. It's
                about empowering yourself by becoming aware of your true
                capacity.
            </p>
            <p class="cs-text">
                Whether you're just starting or looking to deepen your practice,
                Breathwave Ireland offers the guidance and support you need to
                connect with your authentic self and live with more clarity and
                balance.
            </p>
            <div class="flex flex-col gap-2">
                <span class="text-header">Ronan O'Brien</span>
                <span class="text-primary">Founder, Breathwave Ireland</span>
            </div>
        </div>
    </div>
</section>
<style lang="less">
    /*-- -------------------------- -->
<---   Side By Side Reverse     -->
<--- -------------------------- -*/

    /* Mobile - 360px */
    @media only screen and (min-width: 0rem) {
        #sbsr-1457 {
            padding: var(--sectionPadding);
            position: relative;
            z-index: 1;

            .cs-container {
                width: 100%;
                max-width: (1280/16rem);
                margin: auto;
                display: flex;
                flex-direction: column;
                align-items: center;
                /* 48px - 64px */
                gap: clamp(3rem, 6vw, 4rem);
            }

            .cs-content {
                /* set text align to left if content needs to be left aligned */
                text-align: left;
                width: 100%;
                max-width: (600/16rem);
                display: flex;
                flex-direction: column;
                /* centers content horizontally, set to flex-start to left align */
                align-items: flex-start;
            }

            .cs-text {
                margin-bottom: (16/16rem);
                text-wrap: balance;
                &:last-of-type {
                    margin-bottom: (32/16rem);
                }
            }

            .cs-ul {
                width: 100%;
                margin: 0 0 (32/16rem) 0;
                padding-left: (20/16rem);
                /* prevents padding from affecting width and height */
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                gap: (8/16rem);
            }

            .cs-li {
                font-size: var(--bodyFontSize);
                line-height: 1.5em;
                list-style: none;
                text-align: left;
                width: 100%;
                max-width: (400/16rem);
                margin: 0;
                color: var(--bodyTextColor);
                position: relative;

                &:before {
                    /* bullet */
                    content: "";
                    width: 4px;
                    height: 4px;
                    border-radius: 50%;
                    background: currentColor;
                    opacity: 1;
                    position: absolute;
                    display: block;
                    top: (10/16rem);
                    left: (-15/16rem);
                }
            }

            .responsive-video {
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 1.5em;
                aspect-ratio: 1 / 1; /* Enforce square aspect ratio */
            }

            /* Styling Captions */
            video::cue {
                /* Ensure captions don't exceed 80% of the video width */
                max-width: 80%;
                left: 10%;
                right: 10%;
                bottom: 10%;
                text-align: center;
                background: rgba(0, 0, 0, 0.7);
                color: #fff;
                font-size: 1em;
                padding: 2em 0.5em;
                border-radius: 4px;
                margin-bottom: 1rem;
                text-wrap: balance;
            }

            .cs-button-solid {
                font-size: (16/16rem);
                /* 46px - 56px */
                line-height: clamp(2.875rem, 5.5vw, 3.5rem);
                text-decoration: none;
                font-weight: 700;
                text-align: center;
                margin: 0;
                color: #fff;
                min-width: (150/16rem);
                padding: 0 (24/16rem);
                background-color: var(--primary);
                border-radius: (4/16rem);
                display: inline-block;
                position: relative;
                z-index: 1;
                /* prevents padding from adding to the width */
                box-sizing: border-box;

                &:before {
                    content: "";
                    position: absolute;
                    height: 100%;
                    width: 0%;
                    background: #000;
                    opacity: 1;
                    top: 0;
                    left: 0;
                    z-index: -1;
                    border-radius: (4/16rem);
                    transition: width 0.3s;
                }

                &:hover {
                    &:before {
                        width: 100%;
                    }
                }
            }

            .cs-image-group {
                /* scaling the font size with the view width, removed at desktop */
                font-size: ~"min(2.23vw, .83em)";
                /* using ems so we can use font size to scale the whole section */
                position: relative;
                max-width: 600px;
            }

            .cs-picture {
                border-radius: (24/16em);
                /* clips img tag corners */
                overflow: hidden;
                display: block;
                background-color: #fff;
                border-radius: 1.5em;
                position: relative;
            }

            .cs-picture2 {
                width: (600/16em);
                height: (600/16em);
                left: 0;
                bottom: (100/16em);

                img {
                    height: 100%;
                    width: 100%;
                }
            }

            .play-button {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: transparent;
                border: none;
                cursor: pointer;
                z-index: 2;
                transition:
                    opacity 0.3s ease,
                    transform 0.3s ease;
                padding: 0;

                &:hover {
                    transform: translate(-50%, -50%) scale(1.1);
                }

                svg {
                    width: clamp(48px, 8vw, 72px);
                    height: clamp(48px, 8vw, 72px);
                }
            }

            .cs-picture:hover .play-button {
                transform: translate(-50%, -50%) scale(1.1);
            }

            .hidden {
                display: none;
            }

            .thumbnail-img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 1.5em;
            }
        }
    }

    /* Desktop - 1024px */
    @media only screen and (min-width: 64rem) {
        #sbsr-1457 {
            .cs-container {
                flex-flow: row;
                justify-content: space-between;
                align-items: stretch;
                gap: (52/16rem);
            }

            .cs-content {
                padding: (48/16rem) 0;
                max-width: (420/16rem);
                /* prevents flexbox from squishing it */
                flex: none;
                align-self: center;
            }

            .cs-image-group {
                font-size: 1rem;
                width: 50vw;
                max-width: (650/16rem);
                height: auto;
                /* 580px - 729px */
                min-height: clamp(36.25rem, 50vw, 45.5625rem);
                flex: none;
                display: flex;
                justify-content: flex-end;
                /* sends it to the right in the 2nd position */
                order: 2;

                /* Styling Captions for Desktop */
                video::cue {
                    max-width: 60%;
                    left: 20%;
                    right: 20%;
                    text-align: center;
                    background: rgba(0, 0, 0, 0.7);
                    color: #fff;
                    font-size: 1.2em;
                    padding: 0.3em 0.6em;
                    border-radius: 4px;
                }
            }
        }
    }

    @media only screen and (min-width: 1280px) {
        #sbsr-1457 {
            .cs-content {
                max-width: (600/16rem);
            }
        }
    }

    /* Dark Mode */
    @media only screen and (min-width: 0rem) {
        body.dark-mode {
            #sbsr-1457 {
                .cs-title,
                .cs-text,
                .cs-li {
                    color: var(--bodyTextColorWhite);
                    &:before {
                        background-color: var(--bodyTextColorWhite);
                    }
                }
            }

            video::cue {
                background: rgba(0, 0, 0, 0.8);
                color: #fff;
            }
        }
    }
</style>

<script is:inline>
    document.addEventListener("astro:page-load", () => {
        const video = document.getElementById("sbs-video");
        const videoContainer = document.getElementById("sbs-video-container");
        const thumbnail = videoContainer.querySelector(".thumbnail-img");
        let videoLoaded = false;

        videoContainer.onclick = () => {
            const playButton = document.querySelector(".play-button");

            if (!videoLoaded) {
                videoLoaded = true;

                video.addEventListener(
                    "playing",
                    () => {
                        video.classList.remove("hidden");
                        thumbnail.classList.add("hidden");
                    },
                    { once: true },
                );
            }

            if (video.paused) {
                video.play();
                playButton.style.opacity = "0";
                video.controls = true;
            } else {
                video.pause();
                playButton.style.opacity = "1";
                video.controls = false;
            }
        };

        // Reset play button when video ends
        video.addEventListener("ended", () => {
            const playButton = document.querySelector(".play-button");
            playButton.style.opacity = "1";
            video.controls = false;
            thumbnail.classList.remove("hidden");
        });

        // Set up video source after page load
        video.controls = false;
    });
</script>
